<!-- ================= CHECKOUT POPUP ================= -->
<div id="checkoutOverlay" class="fixed inset-0 z-[999] hidden flex items-center justify-center p-4">

    <!-- BACKDROP -->
    <div class="absolute inset-0 bg-black/40" onclick="closeCheckout()"></div>

    <!-- MODAL -->
    <div
        class="relative bg-white w-full max-w-6xl max-h-[90vh] rounded-xl shadow-2xl overflow-hidden flex flex-col md:flex-row">

        <!-- CLOSE BUTTON (Absolute) -->
        <button onclick="closeCheckout()" class="absolute top-4 right-4 z-10 text-xl font-bold hover:text-red-500">
            ‚úï
        </button>

        <!-- LEFT COLUMN (Scrollable) -->
        <div class="w-full md:w-[60%] p-8 overflow-y-auto max-h-[90vh]">

            <!-- SUB HEADER -->
            <h2 class="text-xl font-bold mb-6">Product Details</h2>

            <!-- PRODUCT ITEMS CONTAINER -->
            <div id="checkoutItemsContainer" class="space-y-4 mb-8">
                <!-- Dynamic products will be loaded here -->
            </div>

            <!-- DELIVERY ADDRESS FORM -->
            <h2 class="text-lg font-bold mb-4">Delivery Address</h2>
            <div class="space-y-5 mb-8">
                <div class="flex items-center border-b border-gray-300 py-2">
                    <span class="text-gray-400 mr-3">üë§</span>
                    <input id="checkout_name" type="text" placeholder="Name" class="w-full outline-none text-sm" />
                </div>
                <div class="flex items-center border-b border-gray-300 py-2">
                    <span class="text-gray-400 mr-3">üìû</span>
                    <input id="checkout_phone" type="text" placeholder="Contact Number"
                        class="w-full outline-none text-sm" />
                </div>
                <div class="flex items-center border-b border-gray-300 py-2">
                    <span class="text-gray-400 mr-3">üè†</span>
                    <input id="checkout_house" type="text" placeholder="House no / Building no"
                        class="w-full outline-none text-sm" />
                </div>
                <div class="flex items-center border-b border-gray-300 py-2">
                    <span class="text-gray-400 mr-3">üõ£Ô∏è</span>
                    <input id="checkout_road" type="text" placeholder="Road name / Area / Colony"
                        class="w-full outline-none text-sm" />
                </div>
                <div class="flex items-center border-b border-gray-300 py-2">
                    <span class="text-gray-400 mr-3">üìå</span>
                    <input id="checkout_pincode" type="text" placeholder="Pincode"
                        class="w-full outline-none text-sm" />
                </div>
                <div class="flex gap-4">
                    <div class="flex-1 flex items-center border-b border-gray-300 py-2">
                        <span class="text-gray-400 mr-3">üèôÔ∏è</span>
                        <input id="checkout_city" type="text" placeholder="City" class="w-full outline-none text-sm" />
                    </div>
                    <div class="flex-1 flex items-center border-b border-gray-300 py-2">
                        <span class="text-gray-400 mr-3">üè¢</span>
                        <input id="checkout_state" type="text" placeholder="State"
                            class="w-full outline-none text-sm" />
                    </div>
                </div>
            </div>

            <button onclick="saveCheckoutAddress()"
                class="w-full bg-[#A0522D] text-white py-3 rounded-md font-bold hover:bg-[#8B4513] transition mb-8">
                Save
            </button>

            <!-- PAYMENT METHOD SELECTION -->
            <h2 class="text-lg font-bold mb-4">Select Payment Method</h2>
            <div id="paymentMethodsContainer" class="space-y-4">
                <!-- Option 1 -->
                <label id="codOption" onclick="selectPaymentMethod('COD')"
                    class="flex items-center justify-between p-4 bg-[#3B82F6] text-white rounded-xl cursor-pointer shadow-md">
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-bold">Cash on Delivery</span>
                        <span class="text-2xl">üöõ</span>
                    </div>
                    <div class="bg-white text-blue-500 rounded-full p-0.5" id="codCheck">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7">
                            </path>
                        </svg>
                    </div>
                </label>

                <!-- Option 2 -->
                <label id="onlineOption" onclick="selectPaymentMethod('ONLINE')"
                    class="flex items-center justify-between p-4 border rounded-xl cursor-pointer hover:bg-gray-50">
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-bold text-[#3E1C00]">Online Payment</span>
                        <div class="flex gap-2 text-xs">
                            <span class="bg-gray-200 px-1 rounded text-gray-600">Paytm</span>
                            <span class="bg-gray-200 px-1 rounded text-gray-600">GPay</span>
                        </div>
                    </div>
                    <div class="w-6 h-6 border-2 border-gray-300 rounded-full" id="onlineCheck"></div>
                </label>
            </div>

        </div>

        <!-- RIGHT COLUMN (Sticky/Fixed Visual) -->
        <div class="w-full md:w-[40%] bg-gray-50 p-8 pt-16 border-l border-gray-200 overflow-y-auto max-h-[90vh]">

            <!-- ADDRESS SUMMARY -->
            <h3 class="font-bold mb-3">Delivery Address</h3>
            <div id="checkoutAddressSummary" class="bg-white p-5 rounded-xl shadow-sm mb-6 text-sm relative hidden">
                <div class="flex items-center gap-2 font-bold mb-2">
                    <span>üìÖ</span> <span id="summary_name">Maheshwari</span>
                </div>
                <p id="summary_address_1" class="text-gray-500 leading-relaxed mb-2">
                    Sri Vignesh cooler No,1 shopping complex Sivan Kovil eastcar street, Perumal Kovil back side,
                </p>
                <p id="summary_address_2" class="text-gray-500 mb-2">
                    Thirunelveli, Tamil Nadu, 626203,
                </p>
                <p id="summary_phone" class="font-bold">7339523241.</p>
                <button onclick="editCheckoutAddress()"
                    class="absolute bottom-4 right-4 bg-[#A0522D] text-white text-[10px] px-2 py-1 rounded">
                    CHANGE
                </button>
            </div>

            <!-- PAYMENT METHOD -->
            <div id="checkoutPaymentSelection" class="bg-white p-6 rounded-2xl shadow-sm mb-8">
                <h3 class="font-bold text-xl text-[#3E1C00] mb-5">Payment Method</h3>
                <div class="bg-white p-4 rounded-xl shadow-sm border mb-6 flex justify-between items-center text-sm">
                    <span id="summary_payment_method" class="font-bold">Cash on Delivery</span>
                    <button onclick="editPaymentMethod()"
                        class="bg-[#A0522D] text-white text-[10px] px-2 py-1 rounded">EDIT</button>
                </div>
            </div>

            <!-- PRODUCT DETAILS SUMMARY -->
            <h3 id="checkoutSummaryCount" class="font-bold mb-3">Product Details (0 Items)</h3>
            <div class="flex justify-between text-sm text-gray-500 mb-2">
                <span>Total Product Price</span>
                <span id="checkoutSummaryTotal">Rs: 0.00</span>
            </div>
            <div class="flex justify-between font-bold text-lg mb-8">
                <span>Order Price</span>
                <span id="checkoutSummaryOrder">Rs: 0.00</span>
            </div>

            <button onclick="placeOrder()"
                class="w-full bg-[#A0522D] text-white py-3 rounded-md font-bold hover:bg-[#8B4513] transition shadow-lg">
                Continue
            </button>

        </div>

    </div>
</div>